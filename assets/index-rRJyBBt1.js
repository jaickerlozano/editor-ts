(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function t(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(n){if(n.ep)return;n.ep=!0;const a=t(n);fetch(n.href,a)}})();const m=document.querySelector("#texto");let o=document.querySelector("#salida");const y=document.getElementById("btnDuplicar"),v=document.getElementById("btnReemplazar"),g=document.getElementById("btnAgregar"),f=document.getElementById("btnCortar"),w=document.getElementById("btnEliminar"),C=document.getElementById("btnBuscarSubtexto"),L=document.getElementById("btnBuscarPalabra"),P=document.getElementById("btnMayuscula"),T=document.getElementById("btnMinuscula"),B=document.getElementById("btnContarLetras"),S=document.getElementById("btnContarPalabras"),k=document.getElementById("btnConvertirAlfanumerico"),A=document.getElementById("btnDictado");let p,E;function R(){return m.value}function h(i,e){const t=document.createElement("input");return t.id=i,t.placeholder=e,t}function $(){return new Promise(i=>{const e=document.getElementById("contenedorEntrada");e&&e.remove();const t=document.createElement("form");t.id="contenedorEntrada";const r=h("palabraReemplazo","Ingrese la nueva palabra"),n=h("palabrareemplazada","Ingrese la palabra que desea reemplazar"),a=document.createElement("button");a.type="button",a.textContent="Aceptar",m.after(t),t.append(r,n,a),a.addEventListener("click",()=>{p=r.value.toLocaleLowerCase(),E=n.value.toLocaleLowerCase(),t.remove(),i([p,E])})})}function b(){return new Promise(i=>{const e=document.getElementById("contenedorEntrada");e&&e.remove();const t=document.createElement("form");t.id="contenedorEntrada";const r=document.createElement("input");r.id="otroTexto",r.placeholder="Ingrese el texto que desea agregar";const n=document.createElement("button");n.type="button",n.textContent="Aceptar",m.after(t),t.append(r,n),n.addEventListener("click",()=>{const a=r.value;t.remove(),i(a)})})}function D(){return new Promise(i=>{const e=document.getElementById("contenedorEntrada");e&&e.remove();const t=document.createElement("form");t.id="contenedorEntrada";const r=h("indice1","Ingresa el primer índice"),n=h("indice2","Ingresa el segundo índice"),a=document.createElement("button");a.type="button",a.textContent="Aceptar",m.after(t),t.append(r,n,a),a.addEventListener("click",()=>{const d=Number(r.value),x=Number(n.value);t.remove(),i([d,x])})})}function l(i){return i instanceof Error?i.message:String(i)}class I{texto;constructor(e=""){this.texto=e}validarTexto(e){if(e==="")throw new Error("Debe ingresar un texto")}validarEntrada(e){if(e==="")throw new Error("Debe ingresar un caracter");if(typeof e!="string")throw new Error("Debe ingresar una palabra, número o carácter especial")}validarNumero(e){if(isNaN(e))throw new Error("Debe ingresar sólo números");if(e<0)throw new Error("Debe ingresar un número mayor o igual a 0")}esPalabra(e){if(!/^[A-Za-z]+$/.test(e))throw new Error("Debe ingresar una palabra")}duplicar(e){try{return this.validarTexto(e),this.texto=e.concat(" ",e),this.texto}catch(t){return l(t)}}async reemplazar(e){try{this.validarTexto(e);let[t,r]=await $();return t=t.trim(),r=r.trim(),this.validarEntrada(t),this.validarEntrada(r),this.texto=e.split(" ").join(" "),this.texto=this.texto.replace(new RegExp(`\\b${r}\\b`,"i"),t),this.texto}catch(t){return l(t)}}async agregar(e){try{this.validarTexto(e);const t=await b();return this.validarTexto(t),this.texto=e,this.texto=this.texto.concat(" ",t),this.texto}catch(t){return l(t)}}async cortar(e){try{this.validarTexto(e),this.texto=e;const[t,r]=await D();this.validarNumero(t),this.validarNumero(r);const n=this.texto.length;if(t>n)throw new Error(`El índice ${t} es mayor que el tamaño de la cadena`);if(r>n)throw new Error(`El índice ${r} es mayor que el tamaño de la cadena`);if(t===r)throw new Error("Los índices ingresados no pueden ser iguales");if(t>r)throw new Error(`El índice ${t} no puede ser mayor que el índice ${r}`);return this.texto=this.texto.slice(t,r).trim(),this.texto}catch(t){return l(t)}}async eliminarPalabra(e){try{this.validarTexto(e),this.texto=e;let t=(await b()).trim();return this.esPalabra(t),this.texto=this.texto.replace(new RegExp(`\\b${t}\\b`,"gi"),""),this.texto=this.texto.replace(/\s+/g," ").trim(),this.texto}catch(t){return l(t)}}async buscarSubtexto(e){try{this.validarTexto(e),this.texto=e;const t=await b();this.validarTexto(t);const r=t.split(/\s+/g).join(" ").trim().toLowerCase();return this.texto.toLowerCase().includes(r)?`Sí se encuentra '${r}' dentro del texto`:`No se encuentra '${r}' dentro del texto`}catch(t){return l(t)}}async buscarPalabra(e){try{this.validarTexto(e),this.texto=e;const t=(await b()).trim();this.esPalabra(t);const r=t.trim().toLowerCase();return this.texto.toLowerCase().includes(r)?`Sí se encuentra '${r}' dentro del texto`:`No se encuentra '${r}' dentro del texto`}catch(t){return l(t)}}mayuscula(e){try{return this.validarTexto(e),this.texto=e.toLocaleUpperCase(),this.texto}catch(t){return l(t)}}minuscula(e){try{return this.validarTexto(e),this.texto=e.toLowerCase(),this.texto}catch(t){return l(t)}}contarLetras(e){try{return this.validarTexto(e),this.texto=e,`El texto tiene ${this.texto.split(/\s+/g).join("").trim().length} letras`}catch(t){return l(t)}}contarPalabras(e){try{return this.validarTexto(e),this.texto=e,`El texto tiene ${this.texto.trim().split(/\s+/g).length} palabras en total`}catch(t){return l(t)}}convertirAlfanumerico(e){try{this.validarTexto(e);const t={4:"a",3:"e",0:"o",5:"s",1:"i"};return this.texto=e.replace(/[43051]/g,r=>t[r]??r),this.texto}catch(t){return l(t)}}async tomarDictado(){return new Promise(e=>{const t=window.SpeechRecognition||window.webkitSpeechRecognition;if(!t){e("Tu navegador no soporta la API de reconocimiento de voz.");return}const r=new t;r.lang="es-ES",r.interimResults=!1,r.maxAlternatives=1,r.start(),r.onresult=n=>{const a=n.results[0][0].transcript,d=new Blob([a],{type:"text/plain"}),x=URL.createObjectURL(d),u=document.createElement("a");u.href=x,u.download="dictado.txt",document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(x),e(`Dictado guardado exitosamente: "${a}"`)},r.onerror=n=>{e(`Error en el reconocimiento de voz: ${n.error}`)},r.onspeechend=()=>{r.stop()}})}}let c="";const s=new I;m.addEventListener("input",()=>{o.textContent="",c=R()});y.addEventListener("click",()=>{o.textContent=s.duplicar(c)});v.addEventListener("click",async()=>{o.textContent="",o.textContent=await s.reemplazar(c)});g.addEventListener("click",async()=>{o.textContent="",o.textContent=await s.agregar(c)});f.addEventListener("click",async()=>{o.textContent="",o.textContent=await s.cortar(c)});w.addEventListener("click",async()=>{o.textContent="",o.textContent=await s.eliminarPalabra(c)});C.addEventListener("click",async()=>{o.textContent="",o.textContent=await s.buscarSubtexto(c)});L.addEventListener("click",async()=>{o.textContent="",o.textContent=await s.buscarPalabra(c)});P.addEventListener("click",()=>{o.textContent="",o.textContent=s.mayuscula(c)});T.addEventListener("click",()=>{o.textContent="",o.textContent=s.minuscula(c)});B.addEventListener("click",()=>{o.textContent="",o.textContent=s.contarLetras(c)});S.addEventListener("click",()=>{o.textContent="",o.textContent=s.contarPalabras(c)});k.addEventListener("click",()=>{o.textContent="",o.textContent=s.convertirAlfanumerico(c)});A.addEventListener("click",async()=>{o.textContent="Escuchando...",o.textContent=await s.tomarDictado()});const N=document.querySelector("#toggleTheme");N?.addEventListener("click",()=>{document.body.classList.toggle("dark")});
